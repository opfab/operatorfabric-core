<!-- Copyright (c) 2018-2024, RTE (http://www.rte-france.com)              -->
<!-- Copyright (c) 2023, Alliander (http://www.alliander.com)              -->
<!-- See AUTHORS.txt                                                       -->
<!-- This Source Code Form is subject to the terms of the Mozilla Public   -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this   -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/.              -->
<!-- SPDX-License-Identifier: MPL-2.0                                      -->
<!-- This file is part of the OperatorFabric project.                      -->

<div class="opfab-settings-title" translate>settings.title</div>

<form [formGroup]="settingsForm">
  <div class="opfab-settings">

    <div class="opfab-border-box opfab-settings-item" style="margin-bottom:0px;"
      *ngIf="settingsView.isSettingVisible('sounds')">
      <label translate>settings.playSoundLabel</label>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-sev-alarm">
        <label class="opfab-checkbox ">
          <span class="label-sev-alarm" translate> settings.playSoundForAlarm </span>
          <input type="checkbox" formControlName="playSoundForAlarm">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-sev-action">
        <label class="opfab-checkbox ">
          <span class="label-sev-action" translate> settings.playSoundForAction </span>
          <input type="checkbox" formControlName="playSoundForAction">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-sev-compliant">
        <label class="opfab-checkbox ">
          <span class="label-sev-compliant" translate> settings.playSoundForCompliant </span>
          <input type="checkbox" formControlName="playSoundForCompliant">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-sev-information">
        <label class="opfab-checkbox ">
          <span class="label-sev-information" translate> settings.playSoundForInformation </span>
          <input type="checkbox" formControlName="playSoundForInformation">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
    </div>

    <div class="opfab-settings-sounds opfab-settings-item" *ngIf="settingsView.isSettingVisible('sounds')">
      <div class="opfab-sound-checkbox-label" id="opfab-setting-input-replayEnabled">
        <span class="opfab-settings-sub-item">
          <label class="opfab-checkbox ">
            <span class="label-replay" translate> settings.replayEnabled </span>
            <input type="checkbox" formControlName="replayEnabled">
            <span class="opfab-checkbox-checkmark"></span>
          </label>
        </span>
        <span class="opfab-settings-sub-item" *ngIf="isExternalDeviceSettingVisible">
          <label class="opfab-checkbox ">
            <span class="label-external-devices" translate>
              settings.playSoundOnExternalDevice </span>
            <input id="opfab-setting-input-external-devices" type="checkbox"
              formControlName="playSoundOnExternalDevice">
            <span class="opfab-checkbox-checkmark"></span>
          </label>
        </span>
      </div>
      <div class="opfab-input">
        <label for="opfab-setting-replayInterval" translate>settings.replayInterval</label>
        <input id="opfab-setting-input-replayInterval" type="number" formControlName="replayInterval">
      </div>
    </div>

    <div class="opfab-border-box opfab-settings-item" style="margin-bottom:0px;"
      *ngIf="settingsView.isSettingVisible('systemNotifications')">
      <label translate>settings.notificationOnOperatingSystem</label>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-notif-sev-alarm">
        <label class="opfab-checkbox ">
          <span class="label-sev-alarm" translate> settings.systemNotificationAlarm </span>
          <input type="checkbox" formControlName="systemNotificationAlarm">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-notif-sev-action">
        <label class="opfab-checkbox ">
          <span class="label-sev-action" translate> settings.systemNotificationAction </span>
          <input type="checkbox" formControlName="systemNotificationAction">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-notif-sev-compliant">
        <label class="opfab-checkbox ">
          <span class="label-sev-compliant" translate> settings.systemNotificationCompliant </span>
          <input type="checkbox" formControlName="systemNotificationCompliant">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-notif-sev-information">
        <label class="opfab-checkbox ">
          <span class="label-sev-information" translate> settings.systemNotificationInformation </span>
          <input type="checkbox" formControlName="systemNotificationInformation">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
    </div>

    <div class="opfab-settings-item" *ngIf="settingsView.isSettingVisible('language')">
      <of-multi-select id="opfab-setting-locale" multiSelectId="locale" [parentForm]="settingsForm"
        [config]="languageMultiSelectConfig" [options]=" languageOptionList" [selectedOptions]="languageSelectedOption">
      </of-multi-select>
    </div>

    <div class="opfab-settings-item" *ngIf="settingsView.isSettingVisible('sendCardsByEmail')">
      <span id="opfab-setting-input-sendCardsByEmail" class="opfab-settings-sub-item">
        <label class="opfab-checkbox ">
          <span class="label-sendCardsByEmail" translate> settings.sendCardsByEmail </span>
          <input type="checkbox" formControlName="sendCardsByEmail">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
      <span class="opfab-settings-sub-item" id="opfab-setting-input-emailToPlainText">
        <label class="opfab-checkbox ">
          <span class="label-emailToPlainText" translate> settings.emailToPlainText </span>
          <input type="checkbox" formControlName="emailToPlainText">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </span>
      <div *ngIf="settingsView.isSettingVisible('sendDailyEmail')" id="opfab-setting-input-sendDailyEmail">
        <label class="opfab-checkbox ">
          <span class="label-sendDailyEmail" translate> settings.sendDailyEmail </span>
          <input type="checkbox" formControlName="sendDailyEmail">
          <span class="opfab-checkbox-checkmark"></span>
        </label>
      </div>
    </div>

    <div class="opfab-settings-item" *ngIf="settingsView.isSettingVisible('sendCardsByEmail')">
      <div class="opfab-input">
        <label for="opfab-setting-email" translate>settings.email</label>
        <input id="opfab-setting-input-email" type="email" formControlName="email" autocomplete="off">
      </div>
      <div *ngIf="email.invalid" class="row alert alert-danger">
        <div *ngIf="email.errors.email" translate>settings.input.errors.invalidEmail</div>
      </div>
    </div>
    <div class="opfab-settings-item" id="opfab-setting-input-remoteLoggingEnabled"
      *ngIf="settingsView.isSettingVisible('remoteLoggingEnabled')">
      <label class="opfab-checkbox ">
        <span class="label-remoteLoggingEnabled" translate> settings.remoteLoggingEnabled </span>
        <input type="checkbox" formControlName="remoteLoggingEnabled">
        <span class="opfab-checkbox-checkmark"></span>
      </label>
    </div>
  </div>
</form>

<br />

<div style="text-align: center;width:100%">
  <button id="opfab-settings-btn-save" type="button" class="opfab-btn" [disabled]="!settingsForm.valid"
    (click)='saveSettings()' style="text-align: center;min-width: 243px;"
    translate>shared.confirmSettings</button>
</div>
