<!-- Copyright (c) 2018-2021, RTE (http://www.rte-france.com)              -->
<!-- Copyright (c) 2020, RTEi (http://www.rte-international.com)           -->
<!-- See AUTHORS.txt                                                       -->
<!-- This Source Code Form is subject to the terms of the Mozilla Public   -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this   -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/.              -->
<!-- SPDX-License-Identifier: MPL-2.0                                      -->
<!-- This file is part of the OperatorFabric project.                      -->


<div class="opfab-table">
    <ag-grid-angular aria-describedby="Monitoring results table"
            (gridReady)="onGridReady($event)"
            [gridOptions]="gridOptions"
            [rowData]="rowData$ | async"
            (rowClicked)="selectCard($event.data.cardId)"
            class="opfab-monitoring-ag-grid-theme">
    </ag-grid-angular>

    <div *ngIf="!!result && result.length > maxNbOfRowsToDisplay" style="text-align:right;font-weight: bold;margin-top:0px;margin-right:10px;">
        ... {{result.length - maxNbOfRowsToDisplay}} <span translate> monitoring.moreRows </span>
    </div>


    <div class="opfab-monitoring-export-div">
        <div id="opfab-monitoring-btn-exportToExcel" class="opfab-monitoring-export-btn" style="cursor:pointer" (click)="export()" fileName="monitoringResults" >
            <span class="opfab-icon-export-data"></span>
            <span style="font-weight: bold;" translate> monitoring.ExportTOExcel </span>
        </div>
    </div>
</div>


<ng-template #cardDetail let-modal>
    <div class="modal-body">
        <div>
            <of-card-details [parentModalRef] = "modalRef" [screenSize]="'lg'" [displayContext]="displayContext"> </of-card-details>
        </div>
    </div>
</ng-template>
