<!-- Copyright (c) 2021-2022, RTE (http://www.rte-france.com)                   -->
<!-- See AUTHORS.txt                                                       -->
<!-- This Source Code Form is subject to the terms of the Mozilla Public   -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this   -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/.              -->
<!-- SPDX-License-Identifier: MPL-2.0                                      -->
<!-- This file is part of the OperatorFabric project.                      -->

<div class="opfab-realtimeusers-title" translate xmlns="http://www.w3.org/1999/html">
    menu.realTimeUsers
</div>

<div class="row" *ngIf="this.realTimeScreens" >
    <div class="col-sm" *ngFor="let column of this.realTimeScreens[0].screenColumns;">
        <div class="opfab-realtimeusers-entitiesgroups " *ngFor="let entitiesGroupsElement of column.entitiesGroups;">
            <span class="opfab-realtimeusers-entitiesgroups-title">{{entitiesGroupsElement.name}}</span>
            <table aria-describedby="real time users table" style="width: 100%">
                <tr>
                    <th scope="col"></th>
                    <th scope="col" *ngFor="let group of entitiesGroupsElement.groups;">{{this.groupsService.getGroupName(group)}}</th>
                </tr>
                <tr *ngFor="let entity of entitiesGroupsElement.entities;">
                    <th scope="row">{{this.entitiesService.getEntityName(entity)}}</th>
                    <td *ngFor="let group of entitiesGroupsElement.groups;">
                        <ng-template #connected><span class="badge bg-success" translate>realTimeUsers.connected</span>({{labelForConnectedUsers(entity + '.' + group)}})</ng-template>
                        <ng-template #disconnected><span class="badge bg-danger" translate>realTimeUsers.disconnected</span></ng-template>
                        <span *ngIf="isSomeoneConnectedInEntityAndGroup(entity + '.' + group);then connected else disconnected"></span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
