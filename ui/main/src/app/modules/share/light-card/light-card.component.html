<!-- Copyright (c) 2018-2021, RTE (http://www.rte-france.com)              -->
<!-- See AUTHORS.txt                                                       -->
<!-- This Source Code Form is subject to the terms of the Mozilla Public   -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this   -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/.              -->
<!-- SPDX-License-Identifier: MPL-2.0                                      -->
<!-- This file is part of the OperatorFabric project.                      -->



<div id="opfab-feed-light-card-{{lightCard.process}}-{{lightCard.processInstanceId}}"
     attr.data-urlId="{{lightCard.process}}.{{lightCard.processInstanceId}}"
     class="card light-card-detail "
    [class.light-card-detail-selected]="open" [class.light-card-detail-unselected]="!open"
    [class.light-card-detail-unread]="displayUnreadIcon && !isArchivePageType() && !lightCard.hasBeenRead"
    (click)="select()">
    <div class="d-flex  p-0 border-0">
        <div class="badge-border  opfab-bg-sev-{{lightCard.severity.toString()|lowercase}}">
        </div>
        <div class="p-1" style="width: 100%">
            <div style="display: flex;">
                <p class="card-title ">
                    <span class="text-uppercase" translate [translateParams]="lightCard.title.parameters">{{i18nPrefix +
                        lightCard.title.key}} </span>
                </p>
                <div class="ml-auto align-self-center pr-2" style="margin-right:-5px; margin-top: -10px;">
                    <div class="d-flex align-items-end flex-row">
                        <ng-template #tipHasAResponseFromYourEntity>
                            <span translate>feed.tips.hasAResponseFromYourEntity</span>
                        </ng-template>
                        <span *ngIf="lightCard.hasChildCardFromCurrentUserEntity" id="opfab-feed-lightcard-hasChildCardFromCurrentUserEntity" class="p-2"
                            [ngbPopover]="tipHasAResponseFromYourEntity" popoverClass="opfab-popover" container="body"
                            triggers="mouseenter:mouseleave">
                            <em style="color: #0082FF;" class="fa fa-reply"></em>
                        </span>
                        <ng-template #tipAcknowledged>
                            <span translate>feed.tips.acknowledged</span>
                        </ng-template>
                        <span *ngIf="lightCard.hasBeenAcknowledged" class="p-2"
                            [ngbPopover]="tipAcknowledged" popoverClass="opfab-popover" container="body"
                            triggers="mouseenter:mouseleave">
                            <em style="color: #0082FF;" class="fa fa-check"></em>
                        </span>
                    </div>
                </div>
            </div>
            <div style="display: flex; width: 100%;margin-top: 5px;">

                <p *ngIf="this.dateToDisplay" class="card-subtitle">({{this.dateToDisplay}})</p>

                <div class="ml-auto align-self-center pr-2">
                    <div class="d-flex align-items-end flex-row" style="margin-top: -0.5rem" >
                        <of-countdown  *ngIf="!!lightCard.lttd" [lttd]="lightCard.lttd" [showExpiredIcon]="showExpiredIcon" [showExpiredLabel]="showExpiredLabel" [expiredLabel]="expiredLabel"></of-countdown>
                    </div>
                </div>
            </div>
        </div>


    </div>
    <div class="d-flex p-0 border-0">
        <div class="badge-border  opfab-bg-sev-{{lightCard.severity.toString()|lowercase}}"></div>
        <div class="p-1">
            <span *ngIf="open">
                <span id="opfab-selected-card-summary" translate [translateParams]="lightCard.summary.parameters">{{i18nPrefix +
                    lightCard.summary.key}}</span>
                <span id="opfab-form-entity" *ngIf="fromEntity">
                    
                    <span translate> feed.from</span>
                    <span class="text-uppercase"> {{fromEntity}}</span>
          
                </span>
            </span>
        </div>
    </div>
    <div class="badge-border  opfab-bg-sev-{{lightCard.severity.toString()|lowercase}} "></div>


</div>