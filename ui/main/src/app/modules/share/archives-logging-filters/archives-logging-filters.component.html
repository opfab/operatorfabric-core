<!-- Copyright (c) 2021-2022, RTE (http://www.rte-france.com)              -->
<!-- See AUTHORS.txt                                                       -->
<!-- This Source Code Form is subject to the terms of the Mozilla Public   -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this   -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/.              -->
<!-- SPDX-License-Identifier: MPL-2.0                                      -->
<!-- This file is part of the OperatorFabric project.                      -->

<div style="display: flex;">
    <!--2 columns in this case-->
    <!--First column-->
    <div *ngIf="displayProcessGroupFilter() || tags" style="margin-right:40px">
        <div  style="min-width:300px;max-width:400px;margin-top: 28px;margin-bottom: 54px;">
            <of-multi-filter *ngIf="displayProcessGroupFilter()" filterPath="processGroup" id="opfab-processGroup" [parentForm]="this.parentForm"
                             [values]="processGroupDropdownList" [translateValues]="true" [dropdownSettings]="processGroupDropdownSettings" [selectedItems]="[]"
                             i18nRootLabelKey="shared.filters." [sortValues]="true">
            </of-multi-filter>
            <of-multi-filter *ngIf="! displayProcessGroupFilter() && tags" filterPath="tags" id="opfab-tags" [parentForm]="this.parentForm"
                             [values]="tagsDropdownList" [translateValues]="true" [dropdownSettings]="tagsDropdownSettings" [selectedItems]="[]"
                             i18nRootLabelKey="shared.filters.">
            </of-multi-filter>
        </div>
        <div *ngIf="displayProcessGroupFilter() && tags" style="min-width:300px;max-width:400px;">
            <of-multi-filter filterPath="tags" id="opfab-tags" [parentForm]="this.parentForm" [values]="tagsDropdownList" [translateValues]="true"
                             [dropdownSettings]="tagsDropdownSettings" [selectedItems]="[]" i18nRootLabelKey="shared.filters.">
            </of-multi-filter>
        </div>
    </div>

    <!--Second column-->
    <div *ngIf="displayProcessGroupFilter() || tags" style="margin-right:40px">
        <div style="min-width:300px;max-width:400px;margin-top:28px;margin-bottom: 54px;">
            <of-multi-filter *ngIf="! isThereProcessGroup()" filterPath="process" id="opfab-process" [parentForm]="this.parentForm"
                             [values]="processDropdownList" [dropdownSettings]="processDropdownSettings" [selectedItems]="[]"
                             i18nRootLabelKey="shared.filters." [sortValues]="true">
            </of-multi-filter>
            <of-multi-filter *ngIf="isThereProcessGroup() && displayProcessGroupFilter()" filterPath="process" id="opfab-process" [parentForm]="this.parentForm"
                             [values]="processDropdownListWhenSelectedProcessGroup" [dropdownSettings]="processDropdownSettings" [selectedItems]="[]"
                             i18nRootLabelKey="shared.filters." [sortValues]="true">
            </of-multi-filter>
            <of-multi-filter *ngIf="isThereProcessGroup() && !displayProcessGroupFilter() && isThereOnlyOneProcessGroupInDropdownList()" filterPath="process" id="opfab-process" [parentForm]="this.parentForm"
                             [values]="processesDropdownListPerProcessGroups.get(processGroupDropdownList[0].id)"
                             [dropdownSettings]="processDropdownSettings" [selectedItems]="[]" i18nRootLabelKey="shared.filters." [sortValues]="true">
            </of-multi-filter>
        </div>
        <div style="min-width:300px;max-width:400px;">
            <of-multi-filter filterPath="state" id="opfab-state" [parentForm]="this.parentForm"
                             [values]="stateDropdownListWhenSelectedProcess" [dropdownSettings]="stateDropdownSettings" [selectedItems]="[]"
                             i18nRootLabelKey="shared.filters." [sortValues]="true">
            </of-multi-filter>
        </div>
    </div>

    <!--Only one column in this case-->
    <div *ngIf="! displayProcessGroupFilter() && ! tags" style="margin-right:40px">
        <div style="min-width:300px;max-width:400px;margin-top:28px;margin-bottom: 54px;">
            <of-multi-filter *ngIf="!isThereProcessGroup()" filterPath="process" id="opfab-process" [parentForm]="this.parentForm"
                             [values]="processDropdownList" [dropdownSettings]="processDropdownSettings" [selectedItems]="[]"
                             i18nRootLabelKey="shared.filters." [sortValues]="true">
            </of-multi-filter>
            <of-multi-filter *ngIf="isThereProcessGroup()&&isThereOnlyOneProcessGroupInDropdownList()" filterPath="process" id="opfab-process" [parentForm]="this.parentForm"
                             [values]="processesDropdownListPerProcessGroups.get(processGroupDropdownList[0].id)"
                             [dropdownSettings]="processDropdownSettings" [selectedItems]="[]" i18nRootLabelKey="shared.filters." [sortValues]="true">
            </of-multi-filter>
        </div>
        <div style="min-width:300px;max-width:400px;">
            <of-multi-filter filterPath="state" id="opfab-state" [parentForm]="this.parentForm"
                             [values]="stateDropdownListWhenSelectedProcess" [dropdownSettings]="stateDropdownSettings" [selectedItems]="[]"
                             i18nRootLabelKey="shared.filters." [sortValues]="true">
            </of-multi-filter>
        </div>
    </div>


    <div class="opfab-vertical-bar"></div>
    <div class="opfab-publish-date" [formGroup]="this.parentForm">
        <div>
            <of-datetime-filter id="opfab-publish-date-from" filterPath="publishDateFrom" formControlName="publishDateFrom" [defaultDate]="defaultMinPublishDate" [defaultTime]="{ hour: 0, minute: 0}"
            labelKey="shared.filters." [maxDate]="publishMaxDate" (change)="onDateTimeChange($event)"></of-datetime-filter>
        </div>
        <div>
            <of-datetime-filter id="opfab-publish-date-to" filterPath="publishDateTo" formControlName="publishDateTo"
            labelKey="shared.filters." [minDate]="publishMinDate" (change)="onDateTimeChange($event)"></of-datetime-filter>
        </div>
    </div>

    <div class="opfab-vertical-bar"></div>
    <div style="margin-left:40px;width:230px;min-width: 230px;" [formGroup]="this.parentForm">
        <div>
            <of-datetime-filter id="opfab-active-from" filterPath="activeFrom" formControlName="activeFrom" labelKey="shared.filters." [maxDate]="activeMaxDate" (change)="onDateTimeChange($event)">
            </of-datetime-filter>
        </div>
        <div>
            <of-datetime-filter id="opfab-active-to" filterPath="activeTo" formControlName="activeTo" labelKey="shared.filters." [minDate]="activeMinDate" (change)="onDateTimeChange($event)">
            </of-datetime-filter>
        </div>
    </div>
    <div  class="opfab-buttons">
        <button id="opfab-archives-logging-btn-search" class="opfab-btn"  (click)='query()' translate>button.search</button>
        <button id="opfab-archives-logging-btn-reset" class="opfab-btn-cancel" style="margin-top:50px" (click)='resetForm()' translate>button.reset</button>

    </div>
</div>