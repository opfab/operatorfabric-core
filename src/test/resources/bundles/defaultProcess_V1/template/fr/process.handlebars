<center>
<h4> Process en status {{card.data.stateName}} </h4>

<br/><br/>

<svg id="chart" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="121px" height="311px" viewBox="-0.5 -0.5 121 311" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2020-06-19T20:07:15.439Z&quot; agent=&quot;5.0 (X11)&quot; etag=&quot;axyNPicFnS1ZRxzsM76B&quot; version=&quot;13.2.6&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;C5RBs43oDa-KdzZeNtuy&quot; name=&quot;Page-1&quot;&gt;7Vhbl5owEP41PG4PEFft48qqvWx76nG3dh+zEIEaGRqCyv76JhBuUhW7rva09fiQGSbDZL5vZgANWcvNmOHQ+wQOoZqpOxsN3WqmaXRMU5N/3UkyTa/byxQu8x1lVCqm/jNRSl1pY98hUc2QA1Duh3WlDUFAbF7TYcZgXTebA63fNcQuaSimNqZN7cx3uJdp+2av1L8jvuvldza6b7MrS5wbq5NEHnZgXVGhoYYsBsCz1XJjESqTl+dl9j6Z0btFd/xhEv3AD4OP95+/XmXORsdsKY7ASMBP61qBu8I0VvlSZ+VJnkAGceAQ6UTX0MDjSyqWhlh+J5wnCnAccxAqYNwDFwJM7wBCZTeHgCszQ8okcG4ksEJ+omAvMtXIp1TdQ0jKvi+kiDNYFNhJBwUQ0pjiJ0IH2F64aaAWUGDiUgABka4cQQZ1ljK4YakdtMytwiCCmNlkjx3K7OR9K/xTiIwJLAlniTBghGLur+okxYrrbmFXbP0CvojP1FVdFqRUVWn09LoLjplLuNpVskIsKmGUqpQrR/AGNXgTMrBJFKXcwYzvoZGEcO35nExDnOZyLTpPnVpVyogUDFyKo0gBfoAPx+G5IoyTzV6k8qvdesb7SlyXTcXIQfEqDaWj78a2hsqxEBhGAwML2zSWG/dV8eumf0c5aiaapz/pXVR6RT8aGR2jc0bkzO7FoWu2XQtTO4VOnEW/GHrngqBoV+eA4GaynKzN++SKB0b8vArHYD2rWfkvDz4BMUu+SWdvrnPxsQhECLebmpTk0sbnlW1CelThyXW5SQpJjVdbQ/GEUzcvqGzqHWyapx/HaIvfaIu32Qka4/iwo367uS54hZOKWSgNovbPD3mh7Yxrv71YZBH87kPGL2v0jxxwO1pfWzK3bpHo+tIt8v+7wV/VIvOX70qL3F11r94hi4by0g5ptnzzeWmHROi4Drllf2yHFGL5ZSEzL7/PoOFP&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 60 40 L 60 79.88" fill="none" stroke="#aaaaaa" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 60 88.88 L 55.5 79.88 L 64.5 79.88 Z" fill="none" stroke="#aaaaaa" stroke-miterlimit="10" pointer-events="all"/><rect id="rect_start" x="0" y="0" width="120" height="40" rx="6" ry="6" fill="none" stroke="#aaaaaa" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 20px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #888888; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">process start</div></div></div></foreignObject><text x="60" y="24" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">process start</text></switch></g>
<rect id="rect_calcul2" x="0" y="180" width="120" height="40" rx="6" ry="6" fill="none" stroke="#aaaaaa" pointer-events="all"/>
<g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 200px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div id="text_calcul2" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #888888; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Calcul 2</div></div></div></foreignObject><text x="60" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Calcul 2</text></switch></g><rect id="rect_calcul1" x="0" y="90" width="120" height="40" rx="6" ry="6" fill="none" stroke="#aaaaaa" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 110px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #888888; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Calcul 1 </div></div></div></foreignObject><text x="60" y="114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Calcul 1 </text></switch></g><path d="M 60 130 L 60 160 L 60 169.88" fill="none" stroke="#aaaaaa" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 60 178.88 L 55.5 169.88 L 64.5 169.88 Z" fill="none" stroke="#aaaaaa" stroke-miterlimit="10" pointer-events="all"/><rect id="rect_calcul3" x="0" y="270" width="120" height="40" rx="6" ry="6" fill="none" stroke="#aaaaaa" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 290px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #888888; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Calcul 3</div></div></div></foreignObject><text x="60" y="294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Calcul 3</text></switch></g><path d="M 60 220 L 60 250 L 60 259.88" fill="none" stroke="#aaaaaa" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 60 268.88 L 55.5 259.88 L 64.5 259.88 Z" fill="none" stroke="#aaaaaa" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

<input id="test" value="{{card.data.state}}" hidden></input>
<input id="error" value="{{card.data.error}}" hidden></input>
<script>
var rect = "rect_" + document.getElementById("test").getAttribute("value");
console.log("rect to color  = " + rect);
var stateColor = "#aaffaa";
if (document.getElementById("error").getAttribute("value")=="true") stateColor="red";
console.log("color  = " + stateColor );
document.getElementById(rect).setAttribute("fill",stateColor);

templateGateway.setScreenSize = function(size) {
    const chart = document.getElementById('chart');
    if (chart) {
        if (size === 'lg') {
        chart.setAttribute("width", "181px");
        chart.setAttribute("height", "466px");
        } else {
        chart.setAttribute("width", "111px");
        chart.setAttribute("height", "311px");
        }
    }

 }
 
</script>
</center> 